<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Store CTA Endcard</title>
    <link href="https://fonts.cdnfonts.com/css/gilroy-bold" rel="stylesheet" />

    <script type="module" crossorigin>
      // üîπ –ó–∞–≥–ª—É—à–∫–∞ MRAID –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ / —Ç–µ—Å—Ç–µ—Ä–æ–≤
      if (!window.mraid) {
        window.mraid = {
          addEventListener: (evt, cb) => {
            if (evt === "ready") {
              window.addEventListener("load", cb);
            }
          },
          open: (url) => window.open(url)
        };
      }

      const r = {
        iconUrl: "https://content.hybrid.ai/mraid/hcc_test_v1/RU-Dodo-Pizza-Tall-Logo-Black-sRGB-copy-637230143cec9.jpg",
        title: "–î–æ–¥–æ –ü–∏—Ü—Ü–∞",
        subtitle: "–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã, –∑–∞–∫–∞–∑ –≤ –ø–∏—Ü—Ü–µ—Ä–∏–∏",
        rating: 4.9,
        reviews: "420 —Ç—ã—Å.",
        cta: { text: "–ó–ê–ì–†–£–ó–ò–¢–¨", color: "#017CFE", url: "https://dodopizza.ru" },
        backgroundColor: "#FFFFFF",
        description: "–ú—ã –≥–æ—Ç–æ–≤–∏–º –ø–∏—Ü—Ü—ã –Ω–∞ —Ö—Ä—É—Å—Ç—è—â–µ–º —Ç–µ—Å—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–µ–∂–∏–µ –æ–≤–æ—â–∏, —Å–ª–∏–≤–æ—á–Ω—É—é –º–æ—Ü–∞—Ä–µ–ª–ª—É –∏ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π —Ç–æ–º–∞—Ç–Ω—ã–π —Å–æ—É—Å. –ê –µ—â–µ —É –Ω–∞—Å –µ—Å—Ç—å –∑–∞–∫—É—Å–∫–∏, –¥–µ—Å–µ—Ä—Ç—ã, –Ω–∞–ø–∏—Ç–∫–∏, —Å—ã—Ç–Ω—ã–µ –∑–∞–≤—Ç—Ä–∞–∫–∏ –∏ –≤—ã–≥–æ–¥–Ω—ã–µ –∫–æ–º–±–æ"
      };

      const a = ({ value, selector, color, url }) => {
        const el = document.getElementsByClassName(selector)[0];
        el.style.backgroundColor = color;
        el.classList.add("ios");
        el.children[0].innerHTML = value;
        el.onclick = () => {
          const inIframe = window.self !== window.top;
          if (window?.mraid) {
            inIframe || window.mraid.open(url);
          } else {
            window.open(url);
          }
        };
      };

      const d = ({ src, alt, selector }) => {
        const el = document.getElementsByClassName(selector)[0];
        el.src = src;
        el.alt = alt;
      };

      const u = ({ rating }) => {
        const star = (fill) => `
          <svg width="44" height="42" viewBox="0 0 44 42" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20.6844 1.05397C21.1195 -0.285005 23.0138 -0.285004 23.4488 1.05397L27.6136 13.8719C27.8082 14.4707 28.3662 14.8761 28.9958 14.8761H42.4734C43.8812 14.8761 44.4666 16.6777 43.3276 17.5052L32.424 25.4271C31.9147 25.7972 31.7015 26.4532 31.8961 27.052L36.0609 39.8699C36.4959 41.2089 34.9634 42.3223 33.8244 41.4948L22.9209 33.5729C22.4115 33.2028 21.7217 33.2028 21.2124 33.5729L10.3088 41.4948C9.16981 42.3223 7.6373 41.2089 8.07236 39.8699L12.2371 27.052C12.4317 26.4532 12.2186 25.7972 11.7092 25.4271L0.80563 17.5052C-0.333368 16.6777 0.252 14.8761 1.65988 14.8761H15.1374C15.767 14.8761 16.3251 14.4707 16.5196 13.8719L20.6844 1.05397Z" fill="${fill}"/>
          </svg>`;
        const wrapper = document.getElementsByClassName("stars-wrapper")[0];
        const filled = Array(Math.floor(rating)).fill(star("#E5B002"));
        const empty = Array(5 - Math.floor(rating)).fill(star("#E4E4E4"));
        wrapper.style.scale = "0.7";
        wrapper.innerHTML = filled.concat(empty).join("");
      };

      const i = ({ value, selector }) => {
        const el = document.getElementsByClassName(selector)[0];
        el.innerHTML = value;
      };

      const m = () => {
        const body = document.getElementsByTagName("body")[0];
        body.style.background = r.backgroundColor;
        d({ selector: "logo", src: r.iconUrl, alt: "logo" });
        i({ value: r.title, selector: "title" });
        i({ value: r.subtitle, selector: "subtitle" });
        u({ rating: r.rating });
        i({ value: `${r.rating} ‚Ä¢ –û—Ç–∑—ã–≤—ã: ${r.reviews}`, selector: "reviews" });
        a({ value: r.cta.text, color: r.cta.color, url: r.cta.url, selector: "cta-button" });
        i({ value: r.description, selector: "description" });
      };

      // ‚úÖ –ö–∞–Ω–æ–Ω + fallback
      if (window.mraid && window.mraid.addEventListener) {
        window.mraid.addEventListener("ready", m);
      } else {
        window.addEventListener("load", m);
      }
    </script>

    <style rel="stylesheet" crossorigin>
      body{display:flex;flex-direction:column;box-sizing:border-box;margin:0;overflow:hidden;text-align:center;align-items:center;width:100vw;height:100vh;padding:26.38% 13.19% 13.19%}
      img{object-fit:contain;display:block;width:208px;height:208px}
      span{line-height:150%;letter-spacing:0px}
      div{box-sizing:border-box}
      .title{font-family:Gilroy,sans-serif;font-weight:600;font-size:45px;margin-top:8.5%;color:#181818}
      .subtitle{font-family:Gilroy-Regular,sans-serif;font-weight:400;font-size:30px;color:#181818;margin-top:4%}
      .stars-wrapper{display:flex;gap:4px;margin-top:4%}
      .reviews{font-family:Gilroy-Regular,sans-serif;font-weight:400;font-size:29px;color:#9d9d9d;margin-top:2%}
      .description{font-family:Gilroy-Regular,sans-serif;font-weight:400;font-size:25px;line-height:100%;text-align:justify;color:#9d9d9d;margin-top:auto}
      .cta-button{height:97px;width:90%;border:none;color:#fff;margin-top:15%}
      .cta-button span{font-family:Gilroy,sans-serif;font-weight:600;font-size:40px}
      .ios{border-radius:48px}
      .android{border-radius:18px}
      @media screen and (max-width: 320px) and (max-height: 480px){
        body{padding:16px}
        img{width:100px;height:100px}
        .title{font-size:24px;margin-top:12px}
        .subtitle{font-size:16px;margin-top:12px}
        .stars-wrapper{gap:4px;scale:.5;margin-top:0}
        .reviews{font-size:16px;margin-top:0}
        .cta-button{height:40px;width:200px;border:none;color:#fff;margin-top:24px}
        .cta-button span{font-family:Gilroy,sans-serif;font-weight:600;font-size:16px}
        .android{border-radius:12px}
        .description{font-size:12px}
      }
      @media screen and (min-width: 350px){
        body{padding:24px}
        img{width:208px;height:208px}
        .title{font-size:32px}
        .subtitle{font-size:18px}
        .stars-wrapper{gap:4px}
        .reviews{font-size:18px}
        .cta-button{height:40px;border:none;color:#fff;margin-top:24px}
        .cta-button span{font-family:Gilroy,sans-serif;font-weight:600;font-size:22px}
        .android{border-radius:12px}
        .description{font-size:18px}
      }
      @media screen and (min-height: 750px){
        .cta-button{height:70px;margin-top:48px}
      }
      @media screen and (min-height: 900px){
        .cta-button{height:70px;margin-top:72px}
      }
      @media screen and (min-height: 1024px){
        body{padding:48px}
      }
    </style>
  </head>
  <body>
    <img class="logo" />
    <span class="title"></span>
    <span class="subtitle"></span>
    <div class="stars-wrapper"></div>
    <span class="reviews"></span>
    <button class="cta-button"><span></span></button>
    <span class="description"></span>
  </body>
</html>
